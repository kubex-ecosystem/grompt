(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{174:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(5155),r=a(2115),l=a(693),n=a(376),o=a(1007),i=a(2098),c=a(3509),d=a(9621),g=a(4616),u=a(4416),p=a(5525),m=a(7434),h=a(9946);let x=(0,h.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var b=a(5695),y=a(1218);let f=(0,h.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var v=a(9723);let k=e=>{let{to:t="/",currentTheme:a,label:r}=e,{t:l}=(0,y.Bd)(),n=(0,b.useRouter)();return(0,s.jsxs)("button",{title:r||l("common.back"),onClick:()=>{let e=window.location.pathname;"back"===t?(v.vF.logNavigation(e,"history-back","back"),n.back()):(v.vF.logNavigation(e,t,"push"),n.push(t))},className:"flex items-center gap-2 px-3 py-2 rounded-lg ".concat(a.buttonSecondary," transition-colors hover:scale-105"),children:[(0,s.jsx)(f,{size:16}),(0,s.jsx)("span",{className:"hidden sm:inline text-sm",children:r||l("common.back")})]})};var j=a(901);let N=()=>{let{t:e}=(0,y.Bd)(),t=(0,b.useRouter)(),a=(0,b.useSearchParams)().get("id"),h=!!a,[f,v]=(0,r.useState)(!0),[N,w]=(0,r.useState)(!1),[S,A]=(0,r.useState)(!1),[R,z]=(0,r.useState)(null),[E,P]=(0,r.useState)({ID:"",Title:"",Role:"",Skills:[],Restrictions:[],PromptExample:""}),[C,M]=(0,r.useState)(""),[T,_]=(0,r.useState)(""),L={dark:{bg:"bg-gray-900",cardBg:"bg-gray-800",text:"text-gray-100",textSecondary:"text-gray-300",border:"border-gray-700",input:"bg-gray-700 border-gray-600 text-gray-100",button:"bg-blue-600 hover:bg-blue-700 text-white",buttonSecondary:"bg-gray-700 hover:bg-gray-600 text-gray-200",accent:"text-blue-400"},light:{bg:"bg-gray-50",cardBg:"bg-white",text:"text-gray-900",textSecondary:"text-gray-600",border:"border-gray-300",input:"bg-white border-gray-300 text-gray-900",button:"bg-blue-600 hover:bg-blue-700 text-white",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-700",accent:"text-blue-600"}},B=f?L.dark:L.light;(0,r.useEffect)(()=>{let e=async()=>{try{w(!0);let e=await fetch("/api/agents/".concat(a));if(!e.ok)throw Error("Failed to load agent");let t=await e.json();P({ID:t.ID||"",Title:t.Title||"",Role:t.Role||"",Skills:t.Skills||[],Restrictions:t.Restrictions||[],PromptExample:t.PromptExample||""})}catch(e){z(e.message)}finally{w(!1)}};h&&e()},[a,h]);let D=(e,t)=>{P(a=>(0,n._)((0,l._)({},a),{[e]:t}))},O=()=>{C.trim()&&!E.Skills.includes(C.trim())&&(P(e=>(0,n._)((0,l._)({},e),{Skills:[...e.Skills,C.trim()]})),M(""))},q=()=>{T.trim()&&!E.Restrictions.includes(T.trim())&&(P(e=>(0,n._)((0,l._)({},e),{Restrictions:[...e.Restrictions,T.trim()]})),_(""))},U=async e=>{if(e.preventDefault(),!E.Title.trim())return void z("Title is required");try{if(A(!0),z(null),!(await fetch(h?"/api/agents/".concat(a):"/api/agents",{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).ok)throw Error("Failed to save agent");t.push("/agents")}catch(e){z(e.message)}finally{A(!1)}};return N?(0,s.jsx)("div",{className:"min-h-screen ".concat(B.bg," ").concat(B.text," flex items-center justify-center"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsxs)("p",{children:[e("loading"),"..."]})]})}):(0,s.jsxs)("div",{className:"min-h-screen ".concat(B.bg," ").concat(B.text),children:[(0,s.jsx)("header",{className:"".concat(B.cardBg," ").concat(B.border," border-b sticky top-0 z-10"),children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(k,{to:"/agents",currentTheme:B}),(0,s.jsx)(o.A,{className:"h-8 w-8 text-blue-500"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:h?e("agents.edit"):e("agents.new")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(j.A,{currentTheme:B}),(0,s.jsx)("button",{title:e("agents.toggleDarkMode"),onClick:()=>v(!f),className:"p-2 rounded-lg ".concat(B.buttonSecondary," transition-colors"),children:f?(0,s.jsx)(i.A,{size:20}):(0,s.jsx)(c.A,{size:20})})]})]})})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[R&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:R}),(0,s.jsxs)("form",{onSubmit:U,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"".concat(B.cardBg," ").concat(B.border," border rounded-lg p-6"),children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[(0,s.jsx)(o.A,{size:20,className:"text-blue-500"}),e("agents.form.basic")]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2",children:[e("agents.form.title")," *"]}),(0,s.jsx)("input",{title:e("agents.form.title"),type:"text",value:E.Title,onChange:e=>D("Title",e.target.value),placeholder:e("agents.form.titlePlaceholder"),className:"w-full px-4 py-3 rounded-lg ".concat(B.input," ").concat(B.border," border focus:ring-2 focus:ring-blue-500 focus:border-transparent"),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:e("agents.form.role")}),(0,s.jsx)("input",{title:e("agents.form.role"),type:"text",value:E.Role,onChange:e=>D("Role",e.target.value),placeholder:e("agents.form.rolePlaceholder"),className:"w-full px-4 py-3 rounded-lg ".concat(B.input," ").concat(B.border," border focus:ring-2 focus:ring-blue-500 focus:border-transparent")})]})]})]}),(0,s.jsxs)("div",{className:"".concat(B.cardBg," ").concat(B.border," border rounded-lg p-6"),children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[(0,s.jsx)(d.A,{size:20,className:"text-green-500"}),e("agents.form.skills")]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{title:e("agents.form.skill"),type:"text",value:C,onChange:e=>M(e.target.value),placeholder:e("agents.form.skillPlaceholder"),className:"flex-1 px-4 py-3 rounded-lg ".concat(B.input," ").concat(B.border," border focus:ring-2 focus:ring-blue-500 focus:border-transparent"),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),O())}),(0,s.jsx)("button",{title:e("agents.form.addSkill"),type:"button",onClick:O,className:"px-4 py-3 rounded-lg ".concat(B.button," transition-colors"),children:(0,s.jsx)(g.A,{size:16})})]}),E.Skills.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:E.Skills.map((t,a)=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm",children:[t,(0,s.jsx)("button",{title:e("agents.form.removeSkill"),type:"button",onClick:()=>{P(e=>(0,n._)((0,l._)({},e),{Skills:e.Skills.filter(e=>e!==t)}))},className:"hover:bg-green-200 dark:hover:bg-green-800 rounded-full p-1",children:(0,s.jsx)(u.A,{size:12})})]},a))})]})]}),(0,s.jsxs)("div",{className:"".concat(B.cardBg," ").concat(B.border," border rounded-lg p-6"),children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[(0,s.jsx)(p.A,{size:20,className:"text-red-500"}),e("agents.form.restrictions")]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{title:e("agents.form.restriction"),type:"text",value:T,onChange:e=>_(e.target.value),placeholder:e("agents.form.restrictionPlaceholder"),className:"flex-1 px-4 py-3 rounded-lg ".concat(B.input," ").concat(B.border," border focus:ring-2 focus:ring-blue-500 focus:border-transparent"),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),q())}),(0,s.jsx)("button",{title:e("agents.form.addRestriction"),type:"button",onClick:q,className:"px-4 py-3 rounded-lg ".concat(B.button," transition-colors"),children:(0,s.jsx)(g.A,{size:16})})]}),E.Restrictions.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:E.Restrictions.map((t,a)=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded-full text-sm",children:[t,(0,s.jsx)("button",{title:e("agents.form.removeRestriction"),type:"button",onClick:()=>{P(e=>(0,n._)((0,l._)({},e),{Restrictions:e.Restrictions.filter(e=>e!==t)}))},className:"hover:bg-red-200 dark:hover:bg-red-800 rounded-full p-1",children:(0,s.jsx)(u.A,{size:12})})]},a))})]})]}),(0,s.jsxs)("div",{className:"".concat(B.cardBg," ").concat(B.border," border rounded-lg p-6"),children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[(0,s.jsx)(m.A,{size:20,className:"text-purple-500"}),e("agents.form.promptExample")]}),(0,s.jsx)("textarea",{title:e("agents.form.promptExample"),value:E.PromptExample,onChange:e=>D("PromptExample",e.target.value),placeholder:e("agents.form.promptExamplePlaceholder"),rows:6,className:"w-full px-4 py-3 rounded-lg ".concat(B.input," ").concat(B.border," border focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none")})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{title:e("agents.back"),type:"button",onClick:()=>{t.push("/agents")},disabled:S,className:"px-6 py-3 rounded-lg ".concat(B.buttonSecondary," transition-colors"),children:e("cancel")}),(0,s.jsxs)("button",{title:e("agents.form.save"),type:"submit",disabled:S||!E.Title.trim(),className:"flex items-center gap-2 px-6 py-3 rounded-lg ".concat(B.button," transition-colors disabled:opacity-50"),children:[(0,s.jsx)(x,{size:16}),S?e("saving"):h?e("update"):e("create")]})]})]})]})]})};function w(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading..."})]})}),children:(0,s.jsx)(N,{})})}function S(){return(0,s.jsx)(w,{})}},901:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155),r=a(4869),l=a(1218);let n=e=>{var t;let{currentTheme:a}=e,{i18n:n}=(0,l.Bd)(),o=[{code:"pt-BR",name:"Portugu\xeas",flag:"\uD83C\uDDE7\uD83C\uDDF7"},{code:"en-US",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"}];return(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 rounded-lg ".concat(a.buttonSecondary," transition-colors"),children:[(0,s.jsx)(r.A,{size:16}),(0,s.jsx)("span",{className:"text-sm",children:(null==(t=o.find(e=>e.code===n.language))?void 0:t.flag)||"\uD83C\uDF0D"})]}),(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:o.map(e=>(0,s.jsxs)("button",{onClick:()=>{var t;return t=e.code,void n.changeLanguage(t)},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg transition-colors ".concat(n.language===e.code?"bg-blue-50 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)("span",{className:"text-lg",children:e.flag}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.code))})]})}},1007:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1911:(e,t,a)=>{Promise.resolve().then(a.bind(a,174))},2098:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},3509:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4869:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},5525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},7434:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},9621:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]])},9723:(e,t,a)=>{"use strict";a.d(t,{SJ:()=>n,_o:()=>o,vF:()=>l});var s=a(6447);class r{formatTimestamp(){return new Date().toISOString().split("T")[1].slice(0,-1)}addLog(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",s={timestamp:this.formatTimestamp(),type:e,data:t,level:a};this.logs.push(s),this.logs.length>100&&this.logs.shift(),this.isDev&&this.consoleLog(s)}consoleLog(e){console.groupCollapsed("%c".concat({navigation:"\uD83E\uDDED",request:"\uD83D\uDCE1",response:"✅",error:"❌"}[e.type]," [").concat(e.timestamp,"] ").concat(e.type.toUpperCase()),{info:"color: #2563eb",warn:"color: #f59e0b",error:"color: #dc2626"}[e.level]),console.log(e.data),console.groupEnd()}logNavigation(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"push";this.addLog("navigation",{from:e,to:t,method:a,userAgent:navigator.userAgent.split(" ")[0]})}logRequest(e,t,a,s){this.addLog("request",{url:e.replace(window.location.origin,""),method:t,body:a?JSON.stringify(a).slice(0,200)+"...":void 0,headers:s?Object.keys(s):void 0})}logResponse(e,t,a,s){let r=t>=400?"error":t>=300?"warn":"info";this.addLog("response",{url:e.replace(window.location.origin,""),status:t,statusText:this.getStatusText(t),duration:s?"".concat(s,"ms"):void 0,data:a?JSON.stringify(a).slice(0,100)+"...":void 0},r)}logError(e,t,a){var s;this.addLog("error",{message:e.message,stack:null==(s=e.stack)?void 0:s.split("\n").slice(0,3),context:t,extra:a},"error")}getLogs(){return[...this.logs]}clearLogs(){this.logs=[],console.clear()}exportLogs(){let e=new Blob([JSON.stringify(this.logs,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="grompt-logs-".concat(new Date().toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(t)}getStatusText(e){return({200:"OK",201:"Created",204:"No Content",400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"})[e]||"Unknown"}constructor(){(0,s._)(this,"isDev",!1),(0,s._)(this,"logs",[])}}let l=new r,n=()=>{{let e=history.pushState,t=history.replaceState;history.pushState=function(){for(var t=arguments.length,a=Array(t),s=0;s<t;s++)a[s]=arguments[s];return l.logNavigation(window.location.pathname,a[2],"push"),e.apply(this,a)},history.replaceState=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return l.logNavigation(window.location.pathname,a[2],"replace"),t.apply(this,a)},window.addEventListener("popstate",()=>{l.logNavigation("history",window.location.pathname,"back")})}},o=()=>{{let e=window.fetch;window.fetch=async function(t,a){let s="string"==typeof t?t:t.toString(),r=(null==a?void 0:a.method)||"GET",n=Date.now();l.logRequest(s,r,null==a?void 0:a.body,null==a?void 0:a.headers);try{let r,o=await e(t,a),i=Date.now()-n,c=o.clone();try{r=await c.text()}catch(e){r="[Binary or stream data]"}return l.logResponse(s,o.status,r,i),o}catch(t){let e=Date.now()-n;throw l.logError(t,"Fetch failed for ".concat(s),{duration:e}),t}}}}}},e=>{e.O(0,[143,441,964,358],()=>e(e.s=1911)),_N_E=e.O()}]);