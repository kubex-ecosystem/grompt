"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{5437:(e,t,r)=>{r.d(t,{UY:()=>d,_8:()=>f,dh:()=>y,k$:()=>s,rc:()=>p});let n="grompt.apikeys.v1",a=new TextEncoder,o=new TextDecoder;function c(e){let t="",r=e.byteLength;for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function l(e){let t=atob(e),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return n}async function i(e,t){let r=await crypto.subtle.importKey("raw",a.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function u(){try{let e=localStorage.getItem(n);if(!e)return null;let t=JSON.parse(e);if(!t||1!==t.v||"boolean"!=typeof t.enc||"string"!=typeof t.data)return null;return t}catch(e){return null}}async function s(e,t){let r=JSON.stringify(e);if(t&&t.trim().length>0){let e=crypto.getRandomValues(new Uint8Array(16)),o=crypto.getRandomValues(new Uint8Array(12)),l=await i(t,e),u=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},l,a.encode(r)),s={v:1,enc:!0,salt:c(e),iv:c(o),data:c(new Uint8Array(u))};localStorage.setItem(n,JSON.stringify(s))}else{let e={v:1,enc:!1,data:c(a.encode(r))};localStorage.setItem(n,JSON.stringify(e))}}async function y(e){let t=u();if(!t)return{ok:!0,enc:!1,vault:{}};if(!t.enc)try{let e=o.decode(l(t.data));return{ok:!0,enc:!1,vault:JSON.parse(e)}}catch(e){return{ok:!1,enc:!1,error:"Dados inv\xe1lidos no armazenamento"}}if(!e||0===e.trim().length)return{ok:!0,enc:!0,locked:!0};try{let r=l(t.salt||""),n=l(t.iv||""),a=await i(e,r),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},a,l(t.data)),u=o.decode(new Uint8Array(c));return{ok:!0,enc:!0,vault:JSON.parse(u)}}catch(e){return{ok:!1,enc:!0,locked:!0,error:"Passphrase incorreta"}}}function d(){localStorage.removeItem(n)}function f(){let e=u();return JSON.stringify(null!=e?e:{v:1,enc:!1,data:c(a.encode(JSON.stringify({})))},null,2)}function p(e){let t=JSON.parse(e);if(!t||1!==t.v||"boolean"!=typeof t.enc||"string"!=typeof t.data)throw Error("Formato inv\xe1lido para importa\xe7\xe3o");localStorage.setItem(n,JSON.stringify(t))}}}]);